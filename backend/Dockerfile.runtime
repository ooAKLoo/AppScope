FROM debian:bookworm-slim

RUN apt-get update && apt-get install -y \
    ca-certificates \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

COPY target/release/appscope-backend /app/appscope-backend

RUN mkdir -p /app/data

ENV DATABASE_URL=sqlite:/app/data/appscope.db?mode=rwc
ENV PORT=3001

EXPOSE 3001

CMD ["/app/appscope-backend"]
